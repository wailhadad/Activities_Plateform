{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport axios from 'axios';\nexport default {\n  name: 'EditChild',\n  data() {\n    return {\n      child: {\n        nom: '',\n        prenom: '',\n        date_naissance: '',\n        niveau: '',\n        photo: null\n      }\n    };\n  },\n  created() {\n    this.loadChildData();\n  },\n  methods: {\n    async loadChildData() {\n      const childId = this.$route.params.id;\n      try {\n        const response = await axios.get(`http://localhost:8000/api/children/${childId}`);\n        this.child = response.data;\n      } catch (error) {\n        console.error('Erreur lors de la récupération des données de l\\'enfant:', error);\n      }\n    },\n    onFileChange(e) {\n      const file = e.target.files[0];\n      if (file) {\n        const reader = new FileReader();\n        reader.onload = e => {\n          this.child.photo = e.target.result;\n        };\n        reader.readAsDataURL(file);\n      }\n    },\n    async submitForm() {\n      const childId = this.$route.params.id;\n      try {\n        // Préparez les données du formulaire pour l'envoi\n        const formData = new FormData();\n        formData.append('nom', this.child.nom);\n        formData.append('prenom', this.child.prenom);\n        formData.append('date_naissance', this.child.date_naissance);\n        formData.append('niveau', this.child.niveau);\n        if (this.child.photo) {\n          formData.append('photo', this.dataURLtoBlob(this.child.photo));\n        }\n\n        // Envoyez les données au backend\n        await axios.post(`http://localhost:8000/api/children/${childId}`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n\n        // Redirigez vers la liste des enfants après l'édition\n        this.$router.push({\n          name: 'userchildren'\n        });\n      } catch (error) {\n        console.error('Erreur lors de l\\'enregistrement des modifications:', error);\n      }\n    },\n    async deleteChild() {\n      const childId = this.$route.params.id;\n      try {\n        await axios.delete(`http://localhost:8000/api/children/${childId}`);\n        this.$router.push({\n          name: 'userchildren'\n        });\n      } catch (error) {\n        console.error('Erreur lors de la suppression de l\\'enfant:', error);\n      }\n    },\n    dataURLtoBlob(dataURL) {\n      const arr = dataURL.split(',');\n      const mime = arr[0].match(/:(.*?);/)[1];\n      const bstr = atob(arr[1]);\n      let n = bstr.length;\n      const u8arr = new Uint8Array(n);\n      while (n--) {\n        u8arr[n] = bstr.charCodeAt(n);\n      }\n      return new Blob([u8arr], {\n        type: mime\n      });\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","child","nom","prenom","date_naissance","niveau","photo","created","loadChildData","methods","childId","$route","params","id","response","get","error","console","onFileChange","e","file","target","files","reader","FileReader","onload","result","readAsDataURL","submitForm","formData","FormData","append","dataURLtoBlob","post","headers","$router","push","deleteChild","delete","dataURL","arr","split","mime","match","bstr","atob","n","length","u8arr","Uint8Array","charCodeAt","Blob","type"],"sources":["C:\\Application_ginf1\\Frontend\\src\\components\\EditChild.vue"],"sourcesContent":["<template>\r\n  <div class=\"edit-child-container\">\r\n    <h1>Éditer l'Enfant</h1>\r\n    <form @submit.prevent=\"submitForm\" class=\"edit-child-form\">\r\n      <div class=\"form-group\">\r\n        <label for=\"nom\" class=\"form-label\"><i class=\"fas fa-user\"></i> Nom:</label>\r\n        <input type=\"text\" id=\"nom\" v-model=\"child.nom\" class=\"form-input\" required>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"prenom\" class=\"form-label\"><i class=\"fas fa-user\"></i> Prénom:</label>\r\n        <input type=\"text\" id=\"prenom\" v-model=\"child.prenom\" class=\"form-input\" required>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"date_naissance\" class=\"form-label\"><i class=\"fas fa-calendar\"></i> Date de naissance:</label>\r\n        <input type=\"date\" id=\"date_naissance\" v-model=\"child.date_naissance\" class=\"form-input\" required>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"niveau\" class=\"form-label\"><i class=\"fas fa-graduation-cap\"></i> Niveau:</label>\r\n        <input type=\"text\" id=\"niveau\" v-model=\"child.niveau\" class=\"form-input\" required>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"photo\" class=\"form-label\"><i class=\"fas fa-camera\"></i> Photo:</label>\r\n        <input type=\"file\" id=\"photo\" @change=\"onFileChange\" class=\"form-input\" accept=\"image/*\">\r\n        <div v-if=\"child.photo\" class=\"photo-preview\">\r\n          <img :src=\"child.photo\" alt=\"Photo de l'enfant\">\r\n        </div>\r\n      </div>\r\n      <button type=\"submit\" class=\"form-submit\">Enregistrer les modifications</button>\r\n    </form>\r\n    <button @click=\"deleteChild\" class=\"form-delete\">Supprimer l'enfant</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'EditChild',\r\n  data() {\r\n    return {\r\n      child: {\r\n        nom: '',\r\n        prenom: '',\r\n        date_naissance: '',\r\n        niveau: '',\r\n        photo: null,\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.loadChildData();\r\n  },\r\n  methods: {\r\n    async loadChildData() {\r\n      const childId = this.$route.params.id;\r\n      try {\r\n        const response = await axios.get(`http://localhost:8000/api/children/${childId}`);\r\n        this.child = response.data;\r\n      } catch (error) {\r\n        console.error('Erreur lors de la récupération des données de l\\'enfant:', error);\r\n      }\r\n    },\r\n    onFileChange(e) {\r\n      const file = e.target.files[0];\r\n      if (file) {\r\n        const reader = new FileReader();\r\n        reader.onload = (e) => {\r\n          this.child.photo = e.target.result;\r\n        };\r\n        reader.readAsDataURL(file);\r\n      }\r\n    },\r\n    async submitForm() {\r\n      const childId = this.$route.params.id;\r\n      try {\r\n        // Préparez les données du formulaire pour l'envoi\r\n        const formData = new FormData();\r\n        formData.append('nom', this.child.nom);\r\n        formData.append('prenom', this.child.prenom);\r\n        formData.append('date_naissance', this.child.date_naissance);\r\n        formData.append('niveau', this.child.niveau);\r\n        if (this.child.photo) {\r\n          formData.append('photo', this.dataURLtoBlob(this.child.photo));\r\n        }\r\n\r\n        // Envoyez les données au backend\r\n        await axios.post(`http://localhost:8000/api/children/${childId}`, formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        });\r\n\r\n        // Redirigez vers la liste des enfants après l'édition\r\n        this.$router.push({ name: 'userchildren' });\r\n      } catch (error) {\r\n        console.error('Erreur lors de l\\'enregistrement des modifications:', error);\r\n      }\r\n    },\r\n    async deleteChild() {\r\n      const childId = this.$route.params.id;\r\n      try {\r\n        await axios.delete(`http://localhost:8000/api/children/${childId}`);\r\n        this.$router.push({ name: 'userchildren' });\r\n      } catch (error) {\r\n        console.error('Erreur lors de la suppression de l\\'enfant:', error);\r\n      }\r\n    },\r\n    dataURLtoBlob(dataURL) {\r\n      const arr = dataURL.split(',');\r\n      const mime = arr[0].match(/:(.*?);/)[1];\r\n      const bstr = atob(arr[1]);\r\n      let n = bstr.length;\r\n      const u8arr = new Uint8Array(n);\r\n      while (n--) {\r\n        u8arr[n] = bstr.charCodeAt(n);\r\n      }\r\n      return new Blob([u8arr], { type: mime });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.edit-child-container {\r\n  max-width: 600px;\r\n  margin: 40px auto;\r\n  padding: 20px;\r\n  background: #f9f9f9;\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n  text-align: center;\r\n}\r\n\r\nh1 {\r\n  font-family: 'Baloo Bhaijaan 2', cursive;\r\n  color: #34495e;\r\n  font-size: 2.5rem;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.edit-child-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 20px;\r\n  text-align: left;\r\n}\r\n\r\n.form-label {\r\n  display: block;\r\n  margin-bottom: 5px;\r\n  color: #333;\r\n  font-weight: bold;\r\n}\r\n\r\n.form-input {\r\n  width: 100%;\r\n  padding: 10px;\r\n  border-radius: 5px;\r\n  border: 2px solid #ddd;\r\n  transition: border-color 0.3s;\r\n}\r\n\r\n.form-input:focus {\r\n  border-color: #3498db;\r\n}\r\n\r\n.photo-preview {\r\n  margin-top: 10px;\r\n}\r\n\r\n.photo-preview img {\r\n  max-width: 100px;\r\n  max-height: 100px;\r\n  border-radius: 50%;\r\n  object-fit: cover;\r\n}\r\n\r\n.form-submit {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  background-color: #3498db;\r\n  color: white;\r\n  transition: background-color 0.3s, box-shadow 0.3s;\r\n}\r\n\r\n.form-submit:hover {\r\n  background-color: #2980b9;\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.form-submit:active {\r\n  background-color: #1e5d8b;\r\n}\r\n\r\n.form-delete {\r\n  padding: 10px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  background-color: #e74c3c;\r\n  color: white;\r\n  transition: background-color 0.3s, box-shadow 0.3s;\r\n  margin-top: 20px;\r\n}\r\n\r\n.form-delete:hover {\r\n  background-color: #c0392b;\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.form-delete:active {\r\n  background-color: #a93226;\r\n}\r\n</style>\r\n"],"mappings":";;;;;;;;AAkCA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,KAAK,EAAE;QACLC,GAAG,EAAE,EAAE;QACPC,MAAM,EAAE,EAAE;QACVC,cAAc,EAAE,EAAE;QAClBC,MAAM,EAAE,EAAE;QACVC,KAAK,EAAE;MACT;IACF,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,aAAa,CAAC,CAAC;EACtB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,aAAaA,CAAA,EAAG;MACpB,MAAME,OAAM,GAAI,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,EAAE;MACrC,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMhB,KAAK,CAACiB,GAAG,CAAE,sCAAqCL,OAAQ,EAAC,CAAC;QACjF,IAAI,CAACT,KAAI,GAAIa,QAAQ,CAACd,IAAI;MAC5B,EAAE,OAAOgB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,0DAA0D,EAAEA,KAAK,CAAC;MAClF;IACF,CAAC;IACDE,YAAYA,CAACC,CAAC,EAAE;MACd,MAAMC,IAAG,GAAID,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAC9B,IAAIF,IAAI,EAAE;QACR,MAAMG,MAAK,GAAI,IAAIC,UAAU,CAAC,CAAC;QAC/BD,MAAM,CAACE,MAAK,GAAKN,CAAC,IAAK;UACrB,IAAI,CAAClB,KAAK,CAACK,KAAI,GAAIa,CAAC,CAACE,MAAM,CAACK,MAAM;QACpC,CAAC;QACDH,MAAM,CAACI,aAAa,CAACP,IAAI,CAAC;MAC5B;IACF,CAAC;IACD,MAAMQ,UAAUA,CAAA,EAAG;MACjB,MAAMlB,OAAM,GAAI,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,EAAE;MACrC,IAAI;QACF;QACA,MAAMgB,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;QAC/BD,QAAQ,CAACE,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC9B,KAAK,CAACC,GAAG,CAAC;QACtC2B,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC9B,KAAK,CAACE,MAAM,CAAC;QAC5C0B,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAAE,IAAI,CAAC9B,KAAK,CAACG,cAAc,CAAC;QAC5DyB,QAAQ,CAACE,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC9B,KAAK,CAACI,MAAM,CAAC;QAC5C,IAAI,IAAI,CAACJ,KAAK,CAACK,KAAK,EAAE;UACpBuB,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE,IAAI,CAACC,aAAa,CAAC,IAAI,CAAC/B,KAAK,CAACK,KAAK,CAAC,CAAC;QAChE;;QAEA;QACA,MAAMR,KAAK,CAACmC,IAAI,CAAE,sCAAqCvB,OAAQ,EAAC,EAAEmB,QAAQ,EAAE;UAC1EK,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CAAC,CAAC;;QAEF;QACA,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;UAAErC,IAAI,EAAE;QAAe,CAAC,CAAC;MAC7C,EAAE,OAAOiB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,qDAAqD,EAAEA,KAAK,CAAC;MAC7E;IACF,CAAC;IACD,MAAMqB,WAAWA,CAAA,EAAG;MAClB,MAAM3B,OAAM,GAAI,IAAI,CAACC,MAAM,CAACC,MAAM,CAACC,EAAE;MACrC,IAAI;QACF,MAAMf,KAAK,CAACwC,MAAM,CAAE,sCAAqC5B,OAAQ,EAAC,CAAC;QACnE,IAAI,CAACyB,OAAO,CAACC,IAAI,CAAC;UAAErC,IAAI,EAAE;QAAe,CAAC,CAAC;MAC7C,EAAE,OAAOiB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,6CAA6C,EAAEA,KAAK,CAAC;MACrE;IACF,CAAC;IACDgB,aAAaA,CAACO,OAAO,EAAE;MACrB,MAAMC,GAAE,GAAID,OAAO,CAACE,KAAK,CAAC,GAAG,CAAC;MAC9B,MAAMC,IAAG,GAAIF,GAAG,CAAC,CAAC,CAAC,CAACG,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;MACvC,MAAMC,IAAG,GAAIC,IAAI,CAACL,GAAG,CAAC,CAAC,CAAC,CAAC;MACzB,IAAIM,CAAA,GAAIF,IAAI,CAACG,MAAM;MACnB,MAAMC,KAAI,GAAI,IAAIC,UAAU,CAACH,CAAC,CAAC;MAC/B,OAAOA,CAAC,EAAE,EAAE;QACVE,KAAK,CAACF,CAAC,IAAIF,IAAI,CAACM,UAAU,CAACJ,CAAC,CAAC;MAC/B;MACA,OAAO,IAAIK,IAAI,CAAC,CAACH,KAAK,CAAC,EAAE;QAAEI,IAAI,EAAEV;MAAK,CAAC,CAAC;IAC1C;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}